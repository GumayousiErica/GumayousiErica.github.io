<!-- Portfolio Modals -->
{% for project in site.business %}
{% if site.locale and site.locale != "" and site.locale != nil %}
<div
        class="portfolio-modal modal fade"
        id="p{{ forloop.index }}"
        tabindex="-1"
        role="dialog"
        aria-hidden="true"
>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal" onclick="stopVideo(this)">
                <div class="lr">
                    <div class="rl"></div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 mx-auto">
                        <div class="modal-body">
                            <!-- Project Details Go Here -->
                            <h2 class="text-uppercase">{{ project.title }}</h2>
                            <p class="item-intro text-muted">{{ project.subtitle }}</p>

                            {% if project.video %}
                            <div class="embed-responsive embed-responsive-16by9">
                                <video controls class="embed-responsive-item">
                                    <source src="{{ project.video }}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                            {% elsif project.image %}
                            <img class="img-fluid d-block mx-auto" src="{{ project.image }}" alt="{{ project.caption.title }}">
                            {% endif %}

                            <!-- Explore More Button - only show when explore-more has value -->
                            {% if project.explore-more %}
                            <a href="{{ project.explore-more }}" target="_blank" class="btn btn-secondary mr-2">
                                <i class="fas fa-external-link-alt"></i>
                                Explore More
                            </a>
                            {% endif %}

                            <button
                                    class="btn btn-primary"
                                    data-dismiss="modal"
                                    type="button"
                                    onclick="stopVideo(this)"
                            >
                                <i class="fas fa-times"></i>
                                {{ site.data.sitetext[site.locale].business.closebutton |
                                default: "Close Project" }}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% else %}
<div
        class="portfolio-modal modal fade"
        id="p{{ forloop.index }}"
        tabindex="-1"
        role="dialog"
        aria-hidden="true"
>
    <div class="markdown-highlighting"><div class="modal-dialog">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal" onclick="stopVideo(this)">
                <div class="lr">
                    <div class="rl"></div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 mx-auto">
                        <div class="modal-body">
                            <!-- Project Details Go Here -->
                            <h2 class="text-uppercase">{{ project.title }}</h2>
                            <p class="item-intro text-muted">{{ project.subtitle }}</p>

                            {% if project.video %}
                            <div class="embed-responsive embed-responsive-16by9">
                                <video controls class="embed-responsive-item">
                                    <source src="{{ project.video }}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                            {% elsif project.image %}
                            <img class="img-fluid d-block mx-auto" src="{{ project.image }}" alt="{{ project.caption.title }}">
                            {% endif %}

                            <!-- Explore More Button - only show when explore-more has value -->
                            {% if project.explore-more %}
                            <a href="{{ project.explore-more }}" target="_blank" class="btn btn-secondary mr-2">
                                <i class="fas fa-external-link-alt"></i>
                                Explore More
                            </a>
                            {% endif %}

                            <button
                                    class="btn btn-primary"
                                    data-dismiss="modal"
                                    type="button"
                                    onclick="stopVideo(this)"
                            >
                                <i class="fas fa-times"></i>
                                {{ site.data.sitetext.business.closebutton |
                                default: "Close Project" }}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div></div>
</div>
{% endif %}
{% endfor %}
<!-- End Portfolio Modals -->

<script>
function stopVideo(element) {
    // 找到当前模态框中的视频元素
    const modal = element.closest('.modal');
    const video = modal.querySelector('video');

    // 如果存在视频元素，则暂停播放并重置到开头
    if (video) {
        video.pause();
        video.currentTime = 0;
    }
}
</script>
